
(function($){var R=$.refresh=$.fn.refresh=function(a,b,c){return R.setup(opts.apply(this,arguments));};function opts(a,b,c){var r=$.extend({},R);if(typeof a=="string"){r.url=a;if(b&&!$.isFunction(b))r.time=b;else c=b;if(c)r.success=c;}
else $.extend(r,a);if(!r.method)r.method=$.rest?'Read':'ajax';if(!r.target)r.target=this?this:$;if(!r.type&&!$.rest)r.type='GET';return r;}
$.extend(R,{version:"0.5",url:null,time:(30*60-2)*1000,success:null,method:null,setup:function(r){if(r.cancel)r.cancel();r.id=setInterval(function(){r.refresh(r);},r.time);r.cancel=function(){clearInterval(r.id);return r;};return r;},refresh:function(r){if(r.lastReturn)delete r.lastReturn;r.lastReturn=r.target[r.method](r);}});})(jQuery);