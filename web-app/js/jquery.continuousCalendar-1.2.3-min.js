$.continuousCalendar={};$.continuousCalendar.version="1.2.3";$.continuousCalendar.released="2012-06-04";DateFormat={};DateFormat.parseFunctions={count:0};DateFormat.parseRegexes=[];DateFormat.formatFunctions={count:0};DateFormat.format=function(c,d,a){if(DateFormat.formatFunctions[d]==null){DateFormat.createNewFormat(c,d,a)}var b=DateFormat.formatFunctions[d];return c[b]()};DateFormat.shortDateFormat=function(b,a){return DateFormat.format(b,a?a.shortDateFormat:"n/j/Y",a)};DateFormat.formatRange=function(b,a){if(b._hasTimes){return a.daysLabel(b.days())+" "+a.hoursLabel(b.hours(),b.minutes())}else{return DateFormat.shortDateFormat(b.start,a)+" - "+DateFormat.shortDateFormat(b.end,a)}};DateFormat.formatDefiningRangeDuration=function(d,b){var c=parseInt(d.days()/360,10);if(c>0){return b.yearsLabel(c)}var a=parseInt(d.days()/30,10);if(a>0){return b.monthsLabel(a)}return b.daysLabel(d.days())};DateFormat.parse=function(b,a){if(b=="today"){return DateTime.now()}var c=new Date(b);if(isNaN(c.getTime())){throw Error('Could not parse date from "'+b+'"')}return new DateTime(c,a)};DateFormat.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",FiShortDatePattern:"j.n.Y",FiWeekdayDatePattern:"D j.n.Y",FiWeekdayDateTimePattern:"D j.n.Y k\\lo G:i",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"};DateFormat.parseTime=function(f){var c=b(f.replace(/:|,/i,"."));var e=[parseInt(c[0],10),parseInt(c[1],10)];return(a(e[0])&&d(e[1]))?e:null;function b(g){if(g.indexOf(".")!=-1){return g.split(".")}switch(g.length){case 4:return[g.slice(0,2),g.slice(2,4)];case 3:return[g.slice(0,1),g.slice(1,3)];case 2:return[g,0];default:return[-1,-1]}}function d(g){return !isNaN(g)&&g>=0&&g<=59}function a(g){return !isNaN(g)&&g>=0&&g<=23}};DateFormat.createNewFormat=function(dateTime,format,locale){var funcName="format"+DateFormat.formatFunctions.count++;DateFormat.formatFunctions[format]=funcName;var code="DateTime.prototype."+funcName+" = function(){return ";var special=false;var ch="";for(var i=0;i<format.length;++i){ch=format.charAt(i);if(!special&&ch=="\\"){special=true}else{if(special){special=false;code+="'"+String.escape(ch)+"' + "}else{code+=DateFormat.getFormatCode(ch,locale)}}}eval(code.substring(0,code.length-3)+";}")};DateFormat.getFormatCode=function(b,a){switch(b){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"locale.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"locale.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"locale.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"locale.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(b)+"' + "}};Locale={};Locale.MONDAY=1;Locale.FRIDAY=5;Locale.SUNDAY=0;Locale.hoursAndMinutes=function(a,b){return(Math.round((a+b/60)*100)/100).toString()};Locale.FI={id:"FI",monthNames:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],dayNames:["su","ma","ti","ke","to","pe","la"],yearsLabel:function(a){return a+" "+(a=="1"?"vuosi":"vuotta")},monthsLabel:function(a){return a+" "+(a=="1"?"kuukausi":"kuukautta")},daysLabel:function(a){return a+" "+(a=="1"?"päivä":"päivää")},hoursLabel:function(b,c){var a=Locale.hoursAndMinutes(b,c).replace(".",",");return a+" "+(a=="1"?"tunti":"tuntia")},shortDateFormat:"j.n.Y",weekDateFormat:"D j.n.Y",dateTimeFormat:"D j.n.Y k\\lo G:i",firstWeekday:Locale.MONDAY,getFirstDateOfWeek:function(a){return Locale.getFirstDateOfWeek(a,Locale.MONDAY)}};Locale.EN={id:"EN",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],yearsLabel:function(a){return a+" "+(a=="1"?"Year":"Years")},monthsLabel:function(a){return a+" "+(a=="1"?"Months":"Months")},daysLabel:function(a){return a+" "+(a=="1"?"Day":"Days")},hoursLabel:function(b,c){var a=Locale.hoursAndMinutes(b,c);return a+" "+(a=="1"?"Hour":"Hours")},shortDateFormat:"n/j/Y",weekDateFormat:"D n/j/Y",dateTimeFormat:"D n/j/Y G:i",firstWeekday:Locale.SUNDAY,getFirstDateOfWeek:function(a){return Locale.getFirstDateOfWeek(a,Locale.SUNDAY)}};Locale.AU={id:"AU",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],yearsLabel:function(a){return a+" "+(a=="1"?"Year":"Years")},monthsLabel:function(a){return a+" "+(a=="1"?"Months":"Months")},daysLabel:function(a){return a+" "+(a=="1"?"Day":"Days")},hoursLabel:function(b,c){var a=Locale.hoursAndMinutes(b,c);return a+" "+(a=="1"?"Hour":"Hours")},shortDateFormat:"j/n/Y",weekDateFormat:"D j/n/Y",dateTimeFormat:"D j/n/Y G:i",firstWeekday:Locale.SUNDAY,getFirstDateOfWeek:function(a){return Locale.getFirstDateOfWeek(a,Locale.SUNDAY)}};Locale.DEFAULT=Locale.EN;Locale.getFirstDateOfWeek=function(a,b){if(b<a.getDay()){return a.plusDays(b-a.getDay())}else{if(b>a.getDay()){return a.plusDays(b-a.getDay()-7)}else{return a.clone()}}};Locale.fromArgument=function(a){if(typeof a=="string"){return Locale[a]}else{return a||Locale.DEFAULT}};function DateRange(b,a){if(!b||!a){throw ("two dates must be specified, date1="+b+", date2="+a)}this.start=(b.compareTo(a)>0?a:b);this.end=(b.compareTo(a)>0?b:a);this._days=0;this._hours=0;this._minutes=0;this._valid=true}DateRange.prototype={_setDaysHoursAndMinutes:function(){if(this._hasTimes){var a=parseInt((this.end.getTime()-this.start.getTime()));this._days=parseInt(a/DateTime.DAY);a=a-(this._days*DateTime.DAY);this._hours=parseInt(a/DateTime.HOUR);a=a-(this._hours*DateTime.HOUR);this._minutes=parseInt(a/DateTime.MINUTE)}},_dateWithTime:function(a,b){return a.withTime(b[0],b[1])},hours:function(){return this._hours},minutes:function(){return this._minutes},hasDate:function(a){return a.isBetweenDates(this.start,this.end)},isValid:function(){return this._valid&&this.end.getTime()-this.start.getTime()>=0},days:function(){if(this._hasTimes){return this._days}else{return Math.round(this.start.distanceInDays(this.end)+1)}},shiftDays:function(a){return new DateRange(this.start.plusDays(a),this.end.plusDays(a))},expandTo:function(b){var a=this.start.clone();var c=this.end.clone();if(b.compareTo(this.start)<0){a=b}else{if(b.compareTo(this.end)>0){c=b}}return new DateRange(a,c)},expandDaysTo:function(a){return new DateRange(this.start,this.start.plusDays(a-1))},hasValidSize:function(a){return a<0||this.days()>=a},hasValidSizeAndEndsOnWorkWeek:function(a){return this.hasValidSize(a)&&this.hasEndsOnWeekend()},and:function(a){var c=this.start.compareTo(a.start)>0?this.start:a.start;var b=this.end.compareTo(a.end)>0?a.end:this.end;if(c.compareTo(b)<0){return new DateRange(c,b)}else{return DateRange.emptyRange()}},isInside:function(a){return this.start.compareTo(a.start)>=0&&this.end.compareTo(a.end)<=0},hasEndsOnWeekend:function(){return this.start.isWeekend()||this.end.isWeekend()},withTimes:function(e,d){var c=DateFormat.parseTime(e);var a=DateFormat.parseTime(d);var b=this.clone();if(c&&a){b._valid=true;b._hasTimes=true;b.start=this._dateWithTime(this.start,c);b.end=this._dateWithTime(this.end,a);b._setDaysHoursAndMinutes()}else{b._valid=false}return b},clone:function(){return new DateRange(this.start,this.end)},toString:function(){return["DateRange:",this.start.toString(),"-",this.end.toString(),this._days,"days",this._hours,"hours",this._minutes,"minutes",this._valid?"valid":"invalid"].join(" ")},isPermittedRange:function(c,a,b){return this.hasValidSize(c)&&(!(a&&this.hasEndsOnWeekend()))&&this.isInside(b)},shiftInside:function(b){if(this.days()>b.days()){return DateRange.emptyRange()}var c=this.start.distanceInDays(b.start);var a=this.end.distanceInDays(b.end);if(c>0){return this.shiftDays(c)}if(a<0){return this.shiftDays(a)}return this}};DateRange=$.extend(DateRange,{emptyRange:function(){function a(){this.start=null;this.end=null;this.days=function(){return 0};this.shiftDays=$.noop;this.hasDate=function(){return false};this.clone=function(){return DateRange.emptyRange()}}return new a()},rangeWithMinimumSize:function(g,f,b,e){if(c()){var a=g.expandDaysTo(f);if(b&&a.hasEndsOnWeekend()){var d=a.shiftDays(h(a.end.getDay())).shiftInside(e);while(!d.isPermittedRange(f,b,e)||d.end.compareTo(e.end)>0){if(!d.isPermittedRange(f,false,e)){return DateRange.emptyRange()}d=d.shiftDays(1)}a=d}if(!a.isPermittedRange(f,false,e)){return DateRange.emptyRange()}return a}return g;function c(){return f&&g.days()<=f}function h(i){return -((i+1)%7+1)}}});DateTime=function(a){if(typeof a=="string"){this.date=new Date(a)}else{this.date=a||new Date()}};DateTime.prototype.getTime=function(){return this.date.getTime()};DateTime.prototype.getDate=function(){return this.date.getDate()};DateTime.prototype.getMonth=function(){return this.date.getMonth()};DateTime.prototype.getHours=function(){return this.date.getHours()};DateTime.prototype.getHours=function(){return this.date.getHours()};DateTime.prototype.getFullYear=function(){return this.date.getFullYear()};DateTime.prototype.getDay=function(){return this.date.getDay()};DateTime.prototype.withTime=function(b,a){var c=this.clone();c.date.setHours(b);c.date.setMinutes(a);c.date.setMilliseconds(0);return c};DateTime.DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];DateTime.SECOND=1000;DateTime.MINUTE=60*DateTime.SECOND;DateTime.HOUR=60*DateTime.MINUTE;DateTime.DAY=24*DateTime.HOUR;DateTime.WEEK=7*DateTime.DAY;DateTime.now=function(){if(typeof DateTime._now=="undefined"){DateTime._now=new DateTime()}return DateTime._now};DateTime.getDaysInMonth=function(a,b){if(((0==(a%4))&&((0!=(a%100))||(0==(a%400))))&&b==1){return 29}else{return DateTime.DAYS_IN_MONTH[b]}};DateTime.getDayInYear=function(c,d,a){var e=0;for(var b=0;b<d;b++){e+=DateTime.getDaysInMonth(c,b)}e+=a;return e};DateTime.prototype.getDaysInMonth=function(){return DateTime.getDaysInMonth(this.getFullYear(),this.getMonth())};DateTime.prototype.getDayInYear=function(){return DateTime.getDayInYear(this.getFullYear(),this.getMonth(),this.getDate())};DateTime.prototype.plusDays=function(d){var b=this.clone();var a=this.getHours();b.date.setTime(this.getTime()+d*DateTime.DAY);var c=a-b.getHours();if(c!=0){if(c>12){c-=24}if(c<-12){c+=24}b.date.setTime(b.getTime()+(c*DateTime.HOUR))}return b};DateTime.prototype.stripped=function(){return new Date(parseInt(this.getTime()/DateTime.DAY,10))};DateTime.prototype.compareTo=function(b){if(!b){return 1}var a=this.getTime();var c=b.getTime();if(a<c){return -1}else{if(a>c){return 1}else{return 0}}};DateTime.prototype.isToday=function(){return this.equalsOnlyDate(DateTime.now())};DateTime.prototype.getWeekInYear=function(b){if(b!="US"&&b!="ISO"){throw ("Week numbering system must be either US or ISO, was "+b)}var a=new Date(this.getFullYear(),0,1).getDay();if(b=="US"){return Math.ceil((this.getDayInYear()+a)/7)}var e=4;var d=this.getDay();if(d==0){d=7}if(a==0){a=7}if(this.getMonth()==11&&this.getDate()>=29&&(this.getDate()-d)>27){return 1}if(this.getMonth()==0&&this.getDate()<4&&d>e){return new DateTime(new Date(this.getFullYear()-1,11,31)).getWeekInYear("ISO")}var c=Math.ceil((this.getDayInYear()+a-1)/7);if(a>e){c--}return c};DateTime.prototype.clone=function(){return new DateTime(new Date(this.getTime()))};DateTime.prototype.isOddMonth=function(){return this.getMonth()%2!=0};DateTime.prototype.equalsOnlyDate=function(a){if(!a){return false}return this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()&&this.getFullYear()==a.getFullYear()};DateTime.prototype.isBetweenDates=function(b,a){return this.compareTo(b)>=0&&this.compareTo(a)<=0};DateTime.prototype.firstDateOfMonth=function(){return new DateTime((this.getMonth()+1)+"/1/"+this.getFullYear())};DateTime.prototype.lastDateOfMonth=function(){return new DateTime((this.getMonth()+1)+"/"+this.getDaysInMonth()+"/"+this.getFullYear())};DateTime.prototype.distanceInDays=function(a){var c=parseInt(this.getTime()/DateTime.DAY,10);var b=parseInt(a.getTime()/DateTime.DAY,10);return(b-c)};DateTime.prototype.withWeekday=function(a){return this.plusDays(a-this.getDay())};DateTime.prototype.getOnlyDate=function(){return new DateTime(new Date(this.getFullYear(),this.getMonth(),this.getDate()))};DateTime.prototype.getTimezone=function(){return this.date.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")};DateTime.prototype.getGMTOffset=function(){return(this.date.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(this.getTimezoneOffset()/60),2,"0")+String.leftPad(this.getTimezoneOffset()%60,2,"0")};DateTime.prototype.getDayOfYear=function(){var a=0;DateTime.daysInMonth[1]=this.isLeapYear()?29:28;for(var b=0;b<this.getMonth();++b){a+=DateTime.daysInMonth[b]}return a+this.getDate()-1};DateTime.prototype.getWeekOfYear=function(){var b=this.getDayOfYear()+(4-this.getDay());var a=new Date(this.getFullYear(),0,1);var c=(7-a.getDay()+4);document.write(c);return String.leftPad(((b-c)/7)+1,2,"0")};DateTime.prototype.isLeapYear=function(){var a=this.getFullYear();return((a&3)==0&&(a%100||(a%400==0&&a)))};DateTime.prototype.getDaysInMonth=function(){DateTime.daysInMonth[1]=this.isLeapYear()?29:28;return DateTime.daysInMonth[this.getMonth()]};DateTime.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};DateTime.prototype.isWeekend=function(){return this.getDay()==6||this.getDay()==0};DateTime.prototype.toString=function(){return this.date.toISOString()};String.escape=function(a){return a.replace(/('|\\)/g,"\\$1")};String.leftPad=function(d,b,c){var a=new String(d);if(c==null){c=" "}while(a.length<b){a=c+a}return a};DateTime.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];DateTime.y2kYear=50;DateTime.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11};(function(a){a.fn.continuousCalendar=function(b){return this.each(function(){c.call(a(this),b)});function c(X){a(this).addClass("continuousCalendarContainer").append("&nbsp;");var P={weeksBefore:26,weeksAfter:26,firstDate:null,lastDate:null,startField:a("input.startDate",this),endField:a("input.endDate",this),isPopup:false,selectToday:false,locale:Locale.DEFAULT,disableWeekends:false,disabledDates:null,minimumRange:-1,selectWeek:false,fadeOutDuration:0,callback:a.noop};var an=a.extend({},P,X);an.locale=Locale.fromArgument(an.locale);var G={CREATE_OR_RESIZE:"create",MOVE:"move",NONE:"none"};var ax=p(an.startField);var ac=p(an.endField);var Q=DateTime.now();if(an.selectToday){var g=C(Q);ax=Q;ac=Q;l(g);ae(g)}var O=an.locale.getFirstDateOfWeek(ax||Q);var af=this,ah=[],aA=[],ap={},f=null,J,S,ay,h,D,H=G.NONE,F,e,V=true,E,m;at();function at(){m=a.extend(aj(an.isPopup),aq(aa()));ay=ax&&ac?new DateRange(ax,ac,an.locale):DateRange.emptyRange(an.locale);h=ay.clone();var aE=an.firstDate?DateFormat.parse(an.firstDate,an.locale):O.plusDays(-(an.weeksBefore*7));var aD=an.lastDate?DateFormat.parse(an.lastDate,an.locale):O.plusDays(an.weeksAfter*7+6);an.disabledDates=an.disabledDates?al(an.disabledDates):{};an.fadeOutDuration=parseInt(an.fadeOutDuration,10);D=new DateRange(aE,aD,an.locale);F=u();F.click(function(aF){aF.stopPropagation()});if(a(".startDateLabel",af).isEmpty()){ar(af,m)}m.initUI();m.showInitialSelection();m.performTrigger()}function ab(){if(e){return}var aD=a("<table>").addClass("calendarHeader").append(aw());E=a("<table>").addClass("calendarBody").append(aB());e=a("<div>").addClass("calendarScrollContent").append(E);F.append(aD).append(e);ah=a("td.date",af).get();m.initState();m.addRangeLengthLabel();o();S=a("th.month",aD);z();if(!an.isPopup){s();N()}m.initEvents()}function z(){var aD=false;e.scroll(function(){aD=true});setInterval(function(){if(aD){aD=false;s()}},250)}function al(aE){var aD={};a.each(aE.split(" "),function(aG,aF){aD[DateFormat.parse(aF).date]=true});return aD}function aq(aF){var aD={showInitialSelection:w,initEvents:function(){M(af,E);ao()},addRangeLengthLabel:function(){if(a(".rangeLengthLabel",af).isEmpty()){var aG=a('<div class="label"><span class="rangeLengthLabel"></span></div>');a(".continuousCalendar",af).append(aG)}},addEndDateLabel:function(aG){aG.append('<span class="separator"> - </span>').append('<span class="endDateLabel"></span>')},performTrigger:function(){af.data("calendarRange",ay);az(ay)}};var aE={showInitialSelection:function(){if(an.startField.val()){k(DateFormat.format(DateFormat.parse(an.startField.val()),an.locale.weekDateFormat,an.locale))}},initEvents:function(){am();var aG=ax&&DateFormat.format(ax,"Ymd",an.locale);if(aG in ap){L(ap[aG]).addClass("selected")}},addRangeLengthLabel:a.noop,addEndDateLabel:a.noop,performTrigger:function(){af.data("calendarRange",ax);az(ax)}};return aF?aD:aE}function aj(aD){var aF={initUI:function(){F.addClass("popup").hide();var aG=a('<a href="#" class="calendarIcon">'+Q.getDate()+"</a>").click(A);af.prepend("<div></div>");af.prepend(aG)},initState:a.noop,getContainer:function(aG){return a("<div>").addClass("popUpContainer").append(aG)},addCloseButton:function(aG){var aH=a('<th><a href="#"><span>close</span></a></th>');a("a",aH).click(A);aG.append(aH)},close:function(aG){A.call(aG)},addDateLabelBehaviour:function(aG){aG.addClass("clickable");aG.click(A)}};var aE={initUI:ab,initState:x,getContainer:function(aG){return aG},addCloseButton:a.noop,close:a.noop,addDateLabelBehaviour:a.noop};return aD?aF:aE}function o(){var aD=DateFormat.format(Q,"Ymd",an.locale);if(aD in ap){L(ap[aD]).addClass("today").wrapInner("<div>")}}function u(){var aD=a(".continuousCalendar",af);if(aD.exists()){return aD}else{var aE=a("<div>").addClass("continuousCalendar");af.append(m.getContainer(aE));return aE}}function ar(aD,aF){var aE=a('<div class="label"><span class="startDateLabel"></span></div>');aF.addEndDateLabel(aE);aD.prepend(aE);aF.addDateLabelBehaviour(aE.children())}function M(aE,aD){a("span.rangeLengthLabel",aE).text(an.locale.daysLabel(ay.days()));aD.addClass(an.selectWeek?"weekRange":"freeRange");aD.mousedown(y).mouseover(ai).mouseup(v);aC(aD.get(0))}function N(){var aD=a(".selected, .today",e).get(0);if(aD){e.scrollTop(aD.offsetTop-(e.height()-aD.offsetHeight)/2)}}function s(){var aD=a(".calendarScrollContent",af).get(0);var aG=a("table",aD).get(0);var aE=parseInt(aD.scrollTop/J);var aF=d(aG.rows[aE].cells[2]);S.text(aF.getFullYear())}function aw(){var aE=a("<tr>").append(aD());aE.append(a('<th class="week">&nbsp;</th>'));a(an.locale.dayNames).each(function(aG){var aF=a("<th>").append(an.locale.dayNames[(aG+an.locale.firstWeekday)%7].substr(0,2)).addClass("weekDay");aE.append(aF)});m.addCloseButton(aE);return a("<thead>").append(aE);function aD(){return a("<th>").addClass("month").append(O.getFullYear())}}function x(){K();N()}function K(){J=parseInt(E.height()/a("tr",E).size())}function A(){ab();if(F.is(":visible")){F.fadeOut(an.fadeOutDuration);a(document).unbind("click.continuousCalendar")}else{F.show();if(V){K();s();V=false}N();a(document).bind("click.continuousCalendar",A)}return false}function aB(){var aE=an.locale.getFirstDateOfWeek(D.start);var aD=true;var aF=[];while(aE.compareTo(D.end)<=0){T(aF,aE.clone(),aD);aD=false;aE=aE.plusDays(7)}return"<tbody>"+aF.join("")+"</tbody>"}function T(aH,aE,aD){aH.push("<tr>");aH.push(t(aE,aD));aH.push(Z(aE));for(var aG=0;aG<7;aG++){var aF=aE.plusDays(aG);aH.push(av(aF))}aH.push("</tr>")}function av(aD){var aE='<td class="'+B(aD)+'" date-cell-index="'+aA.length+'">'+aD.getDate()+"</td>";ap[DateFormat.format(aD,"Ymd",an.locale)]=aA.length;aA.push(aD);return aE}function t(aE,aD){var aF='<th class="month '+ad(aE);if(aD||aE.getDate()<=7){aF+=' monthName">';aF+=an.locale.monthNames[aE.getMonth()]}else{aF+='">';if(aE.getDate()<=7*2&&aE.getMonth()==0){aF+=aE.getFullYear()}}return aF+"</th>"}function Z(aD){return'<th class="week '+ad(aD)+'">'+aD.getWeekInYear("ISO")+"</th>"}function B(aD){return a.trim(["date",ad(aD),n(aD),q(aD),ag(aD)].sort().join(" "))}function ad(aD){return aD.isOddMonth()?"odd":""}function n(aD){var aE=an.disableWeekends&&aD.isWeekend();var aF=an.disabledDates[aD.getOnlyDate().date];var aG=!D.hasDate(aD);return aG||aE||aF?"disabled":""}function q(aD){return aD.isToday()?"today":""}function ag(aD){return aD.getDay()==0?"holiday":""}function am(){a(".date",af).bind("click",function(){var aE=a(this);if(aE.hasClass("disabled")){return}a("td.selected",af).removeClass("selected");aE.addClass("selected");var aD=d(aE.get(0));an.startField.val(DateFormat.shortDateFormat(aD,an.locale));k(DateFormat.format(aD,an.locale.weekDateFormat,an.locale));m.close(this);az(aD)})}function Y(){ay=new DateRange(f,f,an.locale)}function y(aH){var aG=aH.target;if(aI(aH)){ay=aF(aH);return}H=G.CREATE_OR_RESIZE;f=d(aG);if(f.equalsOnlyDate(ay.end)){f=ay.start;return}if(f.equalsOnlyDate(ay.start)){f=ay.end;return}if(ay.hasDate(f)){H=G.MOVE;return}if(aE(aG)){Y()}function aE(aJ){return I(aJ)&&ak(aJ)}function aI(aJ){if(an.selectWeek){return aE(aJ.target)||j(aJ.target)}else{return j(aJ.target)||U(aJ.target)||aJ.shiftKey}}function aF(aM){var aL=aM.target;if((an.selectWeek&&aE(aL))||j(aL)){H=G.NONE;var aJ=d(a(aL).parent().children(".date").get(0));return aD(aJ)}else{if(U(aL)){H=G.NONE;var aK=d(a(aL).siblings(".date").get(0));return new DateRange(aK.firstDateOfMonth(),aK.lastDateOfMonth(),an.locale)}else{if(aM.shiftKey){if(ay.days()>0&&aE(aL)){H=G.NONE;ay=ay.expandTo(d(aL));return ay}}}}return ay}function aD(aK){var aJ=aK;var aL=aK.plusDays(6);if(an.disableWeekends){aJ=aK.withWeekday(Locale.MONDAY);aL=aK.withWeekday(Locale.FRIDAY)}return new DateRange(aJ,aL,an.locale).and(D)}}function ai(aE){if(H==G.NONE){return}var aD=d(aE.target);({move:function(){var aF=f.distanceInDays(aD);var aG=ay.shiftDays(aF).and(D);if(r(aG)){f=aD;ay=aG}},create:function(){var aF=new DateRange(f,aD,an.locale);if(ak(aE.target)&&r(aF)){ay=aF}}})[H]();ao()}function r(aD){return aD.isPermittedRange(an.minimumRange,an.disableWeekends,D)}function v(){H=G.NONE;ao();au()}function ao(){ay=DateRange.rangeWithMinimumSize(ay,an.minimumRange,an.disableWeekends,D);W(ay);a("span.rangeLengthLabel",af).text(an.locale.daysLabel(ay.days()))}function W(aD){a("td.selected",af).removeClass("selected").removeClass("rangeStart").removeClass("rangeEnd");R(aD);h=aD.clone()}function R(aD){if(aD.days()==0){return}var aG=ap[DateFormat.format(aD.start,"Ymd",an.locale)];var aF=ap[DateFormat.format(aD.end,"Ymd",an.locale)];for(var aE=aG;aE<=aF;aE++){i(aE,aD.start,aD.end)}}function i(aG,aI,aD){var aF=aA[aG];var aH=L(aG).get(0);var aE=[B(aF)];if(aF.equalsOnlyDate(aD)){aE.push("selected rangeEnd")}else{if(aF.equalsOnlyDate(aI)){aE.push("selected rangeStart")}else{if(aF.isBetweenDates(aI,aD)){aE.push("selected")}}}aH.className=aE.join(" ")}function au(){var aE=C(ay.start);var aD=C(ay.end);af.data("calendarRange",ay);l(aE);ae(aD);w();if(an.selectWeek){m.close(a("td.selected",af).first())}az(ay)}function w(){if(ay.start&&ay.end){var aD=an.locale.weekDateFormat;a("span.startDateLabel",af).text(DateFormat.format(ay.start,aD,an.locale));a("span.endDateLabel",af).text(DateFormat.format(ay.end,aD,an.locale));a("span.separator",af).show()}else{a("span.separator",af).hide()}}function p(aD){return aD.length>0&&aD.val().length>0?DateFormat.parse(aD.val()):null}function aC(aD){if(a.browser.mozilla){a(aD).css("MozUserSelect","none")}else{if(a.browser.msie){a(aD).bind("selectstart",function(){return false})}else{a(aD).mousedown(function(){return false})}}}function az(aD){an.callback.call(af,aD);af.trigger("calendarChange",aD)}function I(aD){return a(aD).closest("[date-cell-index]").hasClass("date")}function j(aD){return a(aD).hasClass("week")}function U(aD){return a(aD).hasClass("month")}function ak(aD){return !a(aD).hasClass("disabled")}function d(aD){return aA[a(aD).closest("[date-cell-index]").attr("date-cell-index")]}function L(aD){return a(ah[aD])}function l(aD){an.startField.val(aD)}function ae(aD){an.endField.val(aD)}function C(aD){return DateFormat.shortDateFormat(aD,an.locale)}function k(aD){a("span.startDateLabel",af).text(aD)}function aa(){return an.endField&&an.endField.length>0}}};a.fn.calendarRange=function(){return a(this).data("calendarRange")};a.fn.exists=function(){return this.length>0};a.fn.isEmpty=function(){return this.length==0}})(jQuery);